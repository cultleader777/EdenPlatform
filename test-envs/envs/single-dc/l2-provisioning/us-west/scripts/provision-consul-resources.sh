#!/bin/sh

ORIGINAL_B64=$( echo -n PGh0bWw+CjxoZWFkPgo8L2hlYWQ+Cjxib2R5Pgo8aDE+RWRlbiBQbGF0Zm9ybSBhZG1pbiBwYW5lbDwvaDE+CjxoMz5BbGVydG1hbmFnZXI8L2gzPgo8dWw+CjxsaT48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly9hZG0tYWxlcnRtYW5hZ2VyLWRlZmF1bHQuZXBsLWluZnJhLm5ldCI+ZGVmYXVsdDwvYT48L2xpPjwvdWw+CjxoMz5Db25zdWw8L2gzPgo8dWw+CjxsaT48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly9hZG0tY29uc3VsLXVzLXdlc3QuZXBsLWluZnJhLm5ldCI+dXMtd2VzdDwvYT48L2xpPjwvdWw+CjxoMz5HcmFmYW5hPC9oMz4KPHVsPgo8bGk+PGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHBzOi8vYWRtLWdyYWZhbmEtbWFpbi5lcGwtaW5mcmEubmV0Ij5tYWluPC9hPjwvbGk+PC91bD4KPGgzPk1pbklPIGNsdXN0ZXJzPC9oMz4KPHVsPgo8bGk+PGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHBzOi8vYWRtLW1pbmlvLWdsb2JhbC5lcGwtaW5mcmEubmV0Ij5nbG9iYWw8L2E+PC9saT48L3VsPgo8aDM+Tm9tYWQ8L2gzPgo8dWw+CjxsaT48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly9hZG0tbm9tYWQtdXMtd2VzdC5lcGwtaW5mcmEubmV0Ij51cy13ZXN0PC9hPjwvbGk+PC91bD4KPGgzPlByb21ldGhldXMgY2x1c3RlcnM8L2gzPgo8dWw+CjxsaT48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly9hZG0tcHJvbWV0aGV1cy1kZWZhdWx0LmVwbC1pbmZyYS5uZXQiPmRlZmF1bHQ8L2E+PC9saT48L3VsPgo8aDM+VmF1bHQ8L2gzPgo8dWw+CjxsaT48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly9hZG0tdmF1bHQtdXMtd2VzdC5lcGwtaW5mcmEubmV0Ij51cy13ZXN0PC9hPjwvbGk+PC91bD4KPC9ib2R5Pgo8L2h0bWw+Cg== )
CURRENT_B64=$( consul kv get epl-kv/admin-site-html | gunzip | base64 -w 0 || true )
if [ "$ORIGINAL_B64" != "$CURRENT_B64" ]
then
  THE_VALUE=$( echo -n $ORIGINAL_B64 | base64 -d | gzip -9 | base64 -w 0 )
  consul kv put -base64 epl-kv/admin-site-html $THE_VALUE
else
  echo epl-kv/admin-site-html is up to date
fi
ORIGINAL_B64=$( echo -n CnBjcmVfaml0IG9uOwoKd29ya2VyX3Byb2Nlc3NlcyA0Owp3b3JrZXJfcmxpbWl0X25vZmlsZSAxMjI4ODsKCmV2ZW50cyB7CiAgICB3b3JrZXJfY29ubmVjdGlvbnMgIDEwMjQ7Cn0KCmh0dHAgewogICAgaW5jbHVkZSAgICAgICAvZXRjL29wZW5yZXN0eS9taW1lLnR5cGVzOwogICAgZGVmYXVsdF90eXBlICBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07CiAgICAjIHN0YXJ0ZWQgZmFpbGluZyBpbiBhY3R1YWwgZW52CiAgICBzZXJ2ZXJfbmFtZXNfaGFzaF9idWNrZXRfc2l6ZSAxMjg7CgogICAgIyBmb3Igd2Vic29ja2V0cwogICAgbWFwICRodHRwX3VwZ3JhZGUgJGNvbm5lY3Rpb25fdXBncmFkZSB7CiAgICAgICAgZGVmYXVsdCB1cGdyYWRlOwogICAgICAgICcnIGNsb3NlOwogICAgfQoKICAgICMgTG9nIGluIEpTT04gRm9ybWF0CiAgICBsb2dfZm9ybWF0IG5naW54bG9nX2pzb24gZXNjYXBlPWpzb24gJ3sgIkB0aW1lc3RhbXAiOiAiJHRpbWVfaXNvODYwMSIsICcKICAgICAgICAgJyJyZW1vdGVfYWRkciI6ICIkcmVtb3RlX2FkZHIiLCAnCiAgICAgICAgICciYm9keV9ieXRlc19zZW50IjogJGJvZHlfYnl0ZXNfc2VudCwgJwogICAgICAgICAnImd6aXBfcmF0aW8iOiAiJGd6aXBfcmF0aW8iLCAnCiAgICAgICAgICcicmVxdWVzdF90aW1lIjogJHJlcXVlc3RfdGltZSwgJwogICAgICAgICAnInVwc3RyZWFtX3Jlc3BvbnNlX3RpbWUiOiAkdXBzdHJlYW1fcmVzcG9uc2VfdGltZSwgJwogICAgICAgICAnInJlc3BvbnNlX3N0YXR1cyI6ICRzdGF0dXMsICcKICAgICAgICAgJyJyZXF1ZXN0IjogIiRyZXF1ZXN0IiwgJwogICAgICAgICAnInJlcXVlc3RfbWV0aG9kIjogIiRyZXF1ZXN0X21ldGhvZCIsICcKICAgICAgICAgJyJob3N0IjogIiRob3N0IiwnCiAgICAgICAgICcidXBzdHJlYW1fYWRkciI6ICIkdXBzdHJlYW1fYWRkciIsJwogICAgICAgICAnImh0dHBfeF9mb3J3YXJkZWRfZm9yIjogIiRodHRwX3hfZm9yd2FyZGVkX2ZvciIsJwogICAgICAgICAnImh0dHBfcmVmZXJyZXIiOiAiJGh0dHBfcmVmZXJlciIsICcKICAgICAgICAgJyJodHRwX3VzZXJfYWdlbnQiOiAiJGh0dHBfdXNlcl9hZ2VudCIsICcKICAgICAgICAgJyJodHRwX3ZlcnNpb24iOiAiJHNlcnZlcl9wcm90b2NvbCIsICcKICAgICAgICAgJyJzZXJ2ZXJfcG9ydCI6ICIkc2VydmVyX3BvcnQifSc7CiAgICBhY2Nlc3NfbG9nIC9kZXYvc3Rkb3V0IG5naW54bG9nX2pzb247CgogICAgIyBTZWUgTW92ZSBkZWZhdWx0IHdyaXRhYmxlIHBhdGhzIHRvIGEgZGVkaWNhdGVkIGRpcmVjdG9yeSAoIzExOSkKICAgICMgaHR0cHM6Ly9naXRodWIuY29tL29wZW5yZXN0eS9kb2NrZXItb3BlbnJlc3R5L2lzc3Vlcy8xMTkKICAgIGNsaWVudF9ib2R5X3RlbXBfcGF0aCAvdmFyL3J1bi9vcGVucmVzdHkvbmdpbngtY2xpZW50LWJvZHk7CiAgICBwcm94eV90ZW1wX3BhdGggICAgICAgL3Zhci9ydW4vb3BlbnJlc3R5L25naW54LXByb3h5OwogICAgZmFzdGNnaV90ZW1wX3BhdGggICAgIC92YXIvcnVuL29wZW5yZXN0eS9uZ2lueC1mYXN0Y2dpOwogICAgdXdzZ2lfdGVtcF9wYXRoICAgICAgIC92YXIvcnVuL29wZW5yZXN0eS9uZ2lueC11d3NnaTsKICAgIHNjZ2lfdGVtcF9wYXRoICAgICAgICAvdmFyL3J1bi9vcGVucmVzdHkvbmdpbngtc2NnaTsKCiAgICBzZW5kZmlsZSAgICAgICAgb247CgogICAga2VlcGFsaXZlX3RpbWVvdXQgIDY1OwoKICAgIGd6aXAgIG9uOwogICAgZ3ppcF9wcm94aWVkIG5vLWNhY2hlIG5vLXN0b3JlIHByaXZhdGUgZXhwaXJlZCBhdXRoOwogICAgZ3ppcF90eXBlcyBhcHBsaWNhdGlvbi9qc29uIHRleHQvaHRtbDsKCiAgICBpbmNsdWRlIC9zZWNyZXRzL3Byb20tc2VydmVyLmNvbmY7CgoKICAgIGx1YV9zaGFyZWRfZGljdCBwcm9tZXRoZXVzX21ldHJpY3MgMTBNOwogICAgbHVhX3BhY2thZ2VfcGF0aCAnL2xvY2FsLz8ubHVhOzsnOwoKICAgIGluaXRfd29ya2VyX2J5X2x1YV9ibG9jayB7CiAgICAgIHByb21ldGhldXMgPSByZXF1aXJlKCJwcm9tZXRoZXVzIikuaW5pdCgicHJvbWV0aGV1c19tZXRyaWNzIikKCiAgICAgIG1ldHJpY19yZXF1ZXN0cyA9IHByb21ldGhldXM6Y291bnRlcigKICAgICAgICAibmdpbnhfaHR0cF9yZXF1ZXN0c190b3RhbCIsICJOdW1iZXIgb2YgSFRUUCByZXF1ZXN0cyIsIHsiaG9zdCIsICJzdGF0dXMifSkKICAgICAgbWV0cmljX2xhdGVuY3kgPSBwcm9tZXRoZXVzOmhpc3RvZ3JhbSgKICAgICAgICAibmdpbnhfaHR0cF9yZXF1ZXN0X2R1cmF0aW9uX3NlY29uZHMiLCAiSFRUUCByZXF1ZXN0IGxhdGVuY3kiLCB7Imhvc3QifSkKICAgICAgbWV0cmljX2Nvbm5lY3Rpb25zID0gcHJvbWV0aGV1czpnYXVnZSgKICAgICAgICAibmdpbnhfaHR0cF9jb25uZWN0aW9ucyIsICJOdW1iZXIgb2YgSFRUUCBjb25uZWN0aW9ucyIsIHsic3RhdGUifSkKICAgICAgbWV0cmljX3Jlc3BvbnNlX3NpemVzID0gcHJvbWV0aGV1czpoaXN0b2dyYW0oCiAgICAgICAgIm5naW54X2h0dHBfcmVzcG9uc2Vfc2l6ZV9ieXRlcyIsICJTaXplIG9mIEhUVFAgcmVzcG9uc2VzIiwgbmlsLAogICAgICAgIHsxMCwxMDAsMTAwMCwxMDAwMCwxMDAwMDAsMTAwMDAwMH0pCiAgICB9CgogICAgbG9nX2J5X2x1YV9ibG9jayB7CiAgICAgIG1ldHJpY19yZXF1ZXN0czppbmMoMSwge25neC52YXIuc2VydmVyX25hbWUsIG5neC52YXIuc3RhdHVzfSkKICAgICAgbWV0cmljX2xhdGVuY3k6b2JzZXJ2ZSh0b251bWJlcihuZ3gudmFyLnJlcXVlc3RfdGltZSksIHtuZ3gudmFyLnNlcnZlcl9uYW1lfSkKICAgICAgbWV0cmljX3Jlc3BvbnNlX3NpemVzOm9ic2VydmUodG9udW1iZXIobmd4LnZhci5ieXRlc19zZW50KSkKICAgIH0KCgpzZXJ2ZXIgewogICAgbGlzdGVuIDgwOwogICAgbGlzdGVuIFs6Ol06ODA7CiAgICBzZXJ2ZXJfbmFtZSBfOwogICAgcmV0dXJuIDMwMSBodHRwczovLyRob3N0JHJlcXVlc3RfdXJpOwp9CgpzZXJ2ZXIgewogICAgbGlzdGVuIDgwOwogICAgbGlzdGVuIFs6Ol06ODA7CiAgICBzZXJ2ZXJfbmFtZSBlcGwtaW5mcmEubmV0OwogICAgcmV0dXJuIDMwMSBodHRwczovLyRob3N0JHJlcXVlc3RfdXJpOwp9CgpzZXJ2ZXIgewogICAgcmVzb2x2ZXIgMTI3LjAuMC4xOjUzIHZhbGlkPTEwczsKCiAgICBsaXN0ZW4gNDQzIHNzbDsKICAgIGxpc3RlbiBbOjpdOjQ0MyBzc2w7CgogICAgYWRkX2hlYWRlciBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4gIioiOwoKICAgIHNlcnZlcl9uYW1lIGVwbC1pbmZyYS5uZXQ7CgogICAgc3NsX2NpcGhlcnMgRUNESEUtRUNEU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtUlNBLUFFUzI1Ni1HQ00tU0hBMzg0OkVDREhFLUVDRFNBLUNIQUNIQTIwLVBPTFkxMzA1OkVDREhFLVJTQS1DSEFDSEEyMC1QT0xZMTMwNTpFQ0RIRS1FQ0RTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1SU0EtQUVTMTI4LUdDTS1TSEEyNTY6RUNESEUtRUNEU0EtQUVTMjU2LVNIQTM4NDpFQ0RIRS1SU0EtQUVTMjU2LVNIQTM4NDpFQ0RIRS1FQ0RTQS1BRVMxMjgtU0hBMjU2OkVDREhFLVJTQS1BRVMxMjgtU0hBMjU2OwogICAgc3NsX2NlcnRpZmljYXRlIC9ldGMvc3NsL3B1YmxpY190bHNfY2VydC5wZW07CiAgICBzc2xfY2VydGlmaWNhdGVfa2V5IC9ldGMvc3NsL3B1YmxpY190bHNfa2V5LnBlbTsKfQoKc2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIGxpc3RlbiBbOjpdOjgwOwogICAgc2VydmVyX25hbWUgYWRtaW4uZXBsLWluZnJhLm5ldDsKICAgIHJldHVybiAzMDEgaHR0cHM6Ly8kaG9zdCRyZXF1ZXN0X3VyaTsKfQoKc2VydmVyIHsKICAgIHJlc29sdmVyIDEyNy4wLjAuMTo1MyB2YWxpZD0xMHM7CgogICAgbGlzdGVuIDQ0MyBzc2w7CiAgICBsaXN0ZW4gWzo6XTo0NDMgc3NsOwoKICAgIGF1dGhfYmFzaWMgIkFkbWluaXN0cmF0b3IgQXJlYSI7CiAgICBhdXRoX2Jhc2ljX3VzZXJfZmlsZSAvbG9jYWwvYWRtaW5faHRwYXNzd2RfZmlsZTsKCiAgICBzZXJ2ZXJfbmFtZSBhZG1pbi5lcGwtaW5mcmEubmV0OwoKICAgIHNzbF9jaXBoZXJzIEVDREhFLUVDRFNBLUFFUzI1Ni1HQ00tU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1FQ0RTQS1DSEFDSEEyMC1QT0xZMTMwNTpFQ0RIRS1SU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtRUNEU0EtQUVTMTI4LUdDTS1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLUVDRFNBLUFFUzI1Ni1TSEEzODQ6RUNESEUtUlNBLUFFUzI1Ni1TSEEzODQ6RUNESEUtRUNEU0EtQUVTMTI4LVNIQTI1NjpFQ0RIRS1SU0EtQUVTMTI4LVNIQTI1NjsKCiAgICBzc2xfY2VydGlmaWNhdGUgL2V0Yy9zc2wvcHVibGljX3Rsc19jZXJ0LnBlbTsKICAgIHNzbF9jZXJ0aWZpY2F0ZV9rZXkgL2V0Yy9zc2wvcHVibGljX3Rsc19rZXkucGVtOwoKCiAgICBsb2NhdGlvbiAvIHsKICAgICAgICByb290IC9sb2NhbC93d3cvOwogICAgfQp9CgpzZXJ2ZXIgewogICAgbGlzdGVuIDgwOwogICAgbGlzdGVuIFs6Ol06ODA7CiAgICBzZXJ2ZXJfbmFtZSBhZG0tYWxlcnRtYW5hZ2VyLWRlZmF1bHQuZXBsLWluZnJhLm5ldDsKICAgIHJldHVybiAzMDEgaHR0cHM6Ly8kaG9zdCRyZXF1ZXN0X3VyaTsKfQoKc2VydmVyIHsKICAgIHJlc29sdmVyIDEyNy4wLjAuMTo1MyB2YWxpZD0xMHM7CiAgICBsaXN0ZW4gNDQzIHNzbDsKICAgIGxpc3RlbiBbOjpdOjQ0MyBzc2w7CiAgICBzZXJ2ZXJfbmFtZSBhZG0tYWxlcnRtYW5hZ2VyLWRlZmF1bHQuZXBsLWluZnJhLm5ldDsKCiAgICBhdXRoX2Jhc2ljICJBZG1pbmlzdHJhdG9yIEFyZWEiOwogICAgYXV0aF9iYXNpY191c2VyX2ZpbGUgL2xvY2FsL2FkbWluX2h0cGFzc3dkX2ZpbGU7CiAgICBzc2xfY2lwaGVycyBFQ0RIRS1FQ0RTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtRUNEU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtUlNBLUNIQUNIQTIwLVBPTFkxMzA1OkVDREhFLUVDRFNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1FQ0RTQS1BRVMyNTYtU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtU0hBMzg0OkVDREhFLUVDRFNBLUFFUzEyOC1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1TSEEyNTY7CgogICAgc3NsX2NlcnRpZmljYXRlIC9ldGMvc3NsL3B1YmxpY190bHNfY2VydC5wZW07CiAgICBzc2xfY2VydGlmaWNhdGVfa2V5IC9ldGMvc3NsL3B1YmxpY190bHNfa2V5LnBlbTsKCiAgICBsb2NhdGlvbiB+IF4vIHsKICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtbW9uLWRlZmF1bHQtYWxlcnRtYW5hZ2VyLnNlcnZpY2UuY29uc3VsOjkwOTI7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCn0KCgpzZXJ2ZXIgewogICAgbGlzdGVuIDgwOwogICAgbGlzdGVuIFs6Ol06ODA7CiAgICBzZXJ2ZXJfbmFtZSBhZG0tY29uc3VsLXVzLXdlc3QuZXBsLWluZnJhLm5ldDsKICAgIHJldHVybiAzMDEgaHR0cHM6Ly8kaG9zdCRyZXF1ZXN0X3VyaTsKfQoKc2VydmVyIHsKICAgIHJlc29sdmVyIDEyNy4wLjAuMTo1MyB2YWxpZD0xMHM7CiAgICBsaXN0ZW4gNDQzIHNzbDsKICAgIGxpc3RlbiBbOjpdOjQ0MyBzc2w7CiAgICBzZXJ2ZXJfbmFtZSBhZG0tY29uc3VsLXVzLXdlc3QuZXBsLWluZnJhLm5ldDsKCiAgICBhdXRoX2Jhc2ljICJBZG1pbmlzdHJhdG9yIEFyZWEiOwogICAgYXV0aF9iYXNpY191c2VyX2ZpbGUgL2xvY2FsL2FkbWluX2h0cGFzc3dkX2ZpbGU7CiAgICBzc2xfY2lwaGVycyBFQ0RIRS1FQ0RTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtRUNEU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtUlNBLUNIQUNIQTIwLVBPTFkxMzA1OkVDREhFLUVDRFNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1FQ0RTQS1BRVMyNTYtU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtU0hBMzg0OkVDREhFLUVDRFNBLUFFUzEyOC1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1TSEEyNTY7CgogICAgc3NsX2NlcnRpZmljYXRlIC9ldGMvc3NsL3B1YmxpY190bHNfY2VydC5wZW07CiAgICBzc2xfY2VydGlmaWNhdGVfa2V5IC9ldGMvc3NsL3B1YmxpY190bHNfa2V5LnBlbTsKCiAgICBsb2NhdGlvbiB+IF4vIHsKICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBjb25zdWwuc2VydmljZS5jb25zdWw6ODUwMTsKICAgICAgICBwcm94eV9wYXNzIGh0dHBzOi8vJGR1bW15X3ZhcjsKCiAgICAgICAgbG9jYXRpb24gfiogXi91aS9hc3NldHMvLiogewogICAgICAgICAgICBleHBpcmVzIDMwZDsKICAgICAgICAgICAgYWRkX2hlYWRlciBDYWNoZS1Db250cm9sIHByaXZhdGU7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cHM6Ly8kZHVtbXlfdmFyOwogICAgICAgIH0KICAgIH0KCn0KCgpzZXJ2ZXIgewogICAgbGlzdGVuIDgwOwogICAgbGlzdGVuIFs6Ol06ODA7CiAgICBzZXJ2ZXJfbmFtZSBhZG0tZ3JhZmFuYS1tYWluLmVwbC1pbmZyYS5uZXQ7CiAgICByZXR1cm4gMzAxIGh0dHBzOi8vJGhvc3QkcmVxdWVzdF91cmk7Cn0KCnNlcnZlciB7CiAgICByZXNvbHZlciAxMjcuMC4wLjE6NTMgdmFsaWQ9MTBzOwogICAgbGlzdGVuIDQ0MyBzc2w7CiAgICBsaXN0ZW4gWzo6XTo0NDMgc3NsOwogICAgc2VydmVyX25hbWUgYWRtLWdyYWZhbmEtbWFpbi5lcGwtaW5mcmEubmV0OwogICAgc3NsX2NpcGhlcnMgRUNESEUtRUNEU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtUlNBLUFFUzI1Ni1HQ00tU0hBMzg0OkVDREhFLUVDRFNBLUNIQUNIQTIwLVBPTFkxMzA1OkVDREhFLVJTQS1DSEFDSEEyMC1QT0xZMTMwNTpFQ0RIRS1FQ0RTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1SU0EtQUVTMTI4LUdDTS1TSEEyNTY6RUNESEUtRUNEU0EtQUVTMjU2LVNIQTM4NDpFQ0RIRS1SU0EtQUVTMjU2LVNIQTM4NDpFQ0RIRS1FQ0RTQS1BRVMxMjgtU0hBMjU2OkVDREhFLVJTQS1BRVMxMjgtU0hBMjU2OwoKICAgIHNzbF9jZXJ0aWZpY2F0ZSAvZXRjL3NzbC9wdWJsaWNfdGxzX2NlcnQucGVtOwogICAgc3NsX2NlcnRpZmljYXRlX2tleSAvZXRjL3NzbC9wdWJsaWNfdGxzX2tleS5wZW07CgogICAgbG9jYXRpb24gfiBeLyB7CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWdyYWZhbmEtbWFpbi5zZXJ2aWNlLmNvbnN1bDozMDAwOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9Cgp9CgoKc2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIGxpc3RlbiBbOjpdOjgwOwogICAgc2VydmVyX25hbWUgYWRtLW1pbmlvLWdsb2JhbC5lcGwtaW5mcmEubmV0OwogICAgcmV0dXJuIDMwMSBodHRwczovLyRob3N0JHJlcXVlc3RfdXJpOwp9CgpzZXJ2ZXIgewogICAgcmVzb2x2ZXIgMTI3LjAuMC4xOjUzIHZhbGlkPTEwczsKICAgIGxpc3RlbiA0NDMgc3NsOwogICAgbGlzdGVuIFs6Ol06NDQzIHNzbDsKICAgIHNlcnZlcl9uYW1lIGFkbS1taW5pby1nbG9iYWwuZXBsLWluZnJhLm5ldDsKICAgIHNzbF9jaXBoZXJzIEVDREhFLUVDRFNBLUFFUzI1Ni1HQ00tU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1FQ0RTQS1DSEFDSEEyMC1QT0xZMTMwNTpFQ0RIRS1SU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtRUNEU0EtQUVTMTI4LUdDTS1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLUVDRFNBLUFFUzI1Ni1TSEEzODQ6RUNESEUtUlNBLUFFUzI1Ni1TSEEzODQ6RUNESEUtRUNEU0EtQUVTMTI4LVNIQTI1NjpFQ0RIRS1SU0EtQUVTMTI4LVNIQTI1NjsKCiAgICBzc2xfY2VydGlmaWNhdGUgL2V0Yy9zc2wvcHVibGljX3Rsc19jZXJ0LnBlbTsKICAgIHNzbF9jZXJ0aWZpY2F0ZV9rZXkgL2V0Yy9zc2wvcHVibGljX3Rsc19rZXkucGVtOwoKICAgIGxvY2F0aW9uIH4gXi8gewogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICRjb25uZWN0aW9uX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHNldCAkZHVtbXlfdmFyIGVwbC1taW5pby1nbG9iYWwuc2VydmljZS5jb25zdWw6OTAwMTsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKfQoKCnNlcnZlciB7CiAgICBsaXN0ZW4gODA7CiAgICBsaXN0ZW4gWzo6XTo4MDsKICAgIHNlcnZlcl9uYW1lIGFkbS1ub21hZC11cy13ZXN0LmVwbC1pbmZyYS5uZXQ7CiAgICByZXR1cm4gMzAxIGh0dHBzOi8vJGhvc3QkcmVxdWVzdF91cmk7Cn0KCnNlcnZlciB7CiAgICByZXNvbHZlciAxMjcuMC4wLjE6NTMgdmFsaWQ9MTBzOwogICAgbGlzdGVuIDQ0MyBzc2w7CiAgICBsaXN0ZW4gWzo6XTo0NDMgc3NsOwogICAgc2VydmVyX25hbWUgYWRtLW5vbWFkLXVzLXdlc3QuZXBsLWluZnJhLm5ldDsKCiAgICBhdXRoX2Jhc2ljICJBZG1pbmlzdHJhdG9yIEFyZWEiOwogICAgYXV0aF9iYXNpY191c2VyX2ZpbGUgL2xvY2FsL2FkbWluX2h0cGFzc3dkX2ZpbGU7CiAgICBzc2xfY2lwaGVycyBFQ0RIRS1FQ0RTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtRUNEU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtUlNBLUNIQUNIQTIwLVBPTFkxMzA1OkVDREhFLUVDRFNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1FQ0RTQS1BRVMyNTYtU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtU0hBMzg0OkVDREhFLUVDRFNBLUFFUzEyOC1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1TSEEyNTY7CgogICAgc3NsX2NlcnRpZmljYXRlIC9ldGMvc3NsL3B1YmxpY190bHNfY2VydC5wZW07CiAgICBzc2xfY2VydGlmaWNhdGVfa2V5IC9ldGMvc3NsL3B1YmxpY190bHNfa2V5LnBlbTsKCiAgICBsb2NhdGlvbiB+IF4vIHsKICAgICAgICBwcm94eV9idWZmZXJpbmcgb2ZmOwogICAgICAgIHByb3h5X3JlYWRfdGltZW91dCAzMTBzOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtRm9yICRwcm94eV9hZGRfeF9mb3J3YXJkZWRfZm9yOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgT3JpZ2luICIke3NjaGVtZX06Ly8ke3Byb3h5X2hvc3R9IjsKICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBub21hZC1zZXJ2ZXJzLnNlcnZpY2UuY29uc3VsOjQ2NDY7CiAgICAgICAgcHJveHlfcGFzcyBodHRwczovLyRkdW1teV92YXI7CiAgICB9Cgp9CgoKc2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIGxpc3RlbiBbOjpdOjgwOwogICAgc2VydmVyX25hbWUgYWRtLXByb21ldGhldXMtZGVmYXVsdC5lcGwtaW5mcmEubmV0OwogICAgcmV0dXJuIDMwMSBodHRwczovLyRob3N0JHJlcXVlc3RfdXJpOwp9CgpzZXJ2ZXIgewogICAgcmVzb2x2ZXIgMTI3LjAuMC4xOjUzIHZhbGlkPTEwczsKICAgIGxpc3RlbiA0NDMgc3NsOwogICAgbGlzdGVuIFs6Ol06NDQzIHNzbDsKICAgIHNlcnZlcl9uYW1lIGFkbS1wcm9tZXRoZXVzLWRlZmF1bHQuZXBsLWluZnJhLm5ldDsKCiAgICBhdXRoX2Jhc2ljICJBZG1pbmlzdHJhdG9yIEFyZWEiOwogICAgYXV0aF9iYXNpY191c2VyX2ZpbGUgL2xvY2FsL2FkbWluX2h0cGFzc3dkX2ZpbGU7CiAgICBzc2xfY2lwaGVycyBFQ0RIRS1FQ0RTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtRUNEU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtUlNBLUNIQUNIQTIwLVBPTFkxMzA1OkVDREhFLUVDRFNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1FQ0RTQS1BRVMyNTYtU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtU0hBMzg0OkVDREhFLUVDRFNBLUFFUzEyOC1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1TSEEyNTY7CgogICAgc3NsX2NlcnRpZmljYXRlIC9ldGMvc3NsL3B1YmxpY190bHNfY2VydC5wZW07CiAgICBzc2xfY2VydGlmaWNhdGVfa2V5IC9ldGMvc3NsL3B1YmxpY190bHNfa2V5LnBlbTsKCiAgICBsb2NhdGlvbiB+IF4vIHsKICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtbW9uLWRlZmF1bHQtcHJvbWV0aGV1cy5zZXJ2aWNlLmNvbnN1bDo5MDkwOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9Cgp9CgoKc2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIGxpc3RlbiBbOjpdOjgwOwogICAgc2VydmVyX25hbWUgYWRtLXZhdWx0LXVzLXdlc3QuZXBsLWluZnJhLm5ldDsKICAgIHJldHVybiAzMDEgaHR0cHM6Ly8kaG9zdCRyZXF1ZXN0X3VyaTsKfQoKc2VydmVyIHsKICAgIHJlc29sdmVyIDEyNy4wLjAuMTo1MyB2YWxpZD0xMHM7CiAgICBsaXN0ZW4gNDQzIHNzbDsKICAgIGxpc3RlbiBbOjpdOjQ0MyBzc2w7CiAgICBzZXJ2ZXJfbmFtZSBhZG0tdmF1bHQtdXMtd2VzdC5lcGwtaW5mcmEubmV0OwoKICAgIGF1dGhfYmFzaWMgIkFkbWluaXN0cmF0b3IgQXJlYSI7CiAgICBhdXRoX2Jhc2ljX3VzZXJfZmlsZSAvbG9jYWwvYWRtaW5faHRwYXNzd2RfZmlsZTsKICAgIHNzbF9jaXBoZXJzIEVDREhFLUVDRFNBLUFFUzI1Ni1HQ00tU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1FQ0RTQS1DSEFDSEEyMC1QT0xZMTMwNTpFQ0RIRS1SU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtRUNEU0EtQUVTMTI4LUdDTS1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLUVDRFNBLUFFUzI1Ni1TSEEzODQ6RUNESEUtUlNBLUFFUzI1Ni1TSEEzODQ6RUNESEUtRUNEU0EtQUVTMTI4LVNIQTI1NjpFQ0RIRS1SU0EtQUVTMTI4LVNIQTI1NjsKCiAgICBzc2xfY2VydGlmaWNhdGUgL2V0Yy9zc2wvcHVibGljX3Rsc19jZXJ0LnBlbTsKICAgIHNzbF9jZXJ0aWZpY2F0ZV9rZXkgL2V0Yy9zc2wvcHVibGljX3Rsc19rZXkucGVtOwoKICAgIGxvY2F0aW9uIH4gXi8gewogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICRjb25uZWN0aW9uX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHNldCAkZHVtbXlfdmFyIHZhdWx0LnNlcnZpY2UuY29uc3VsOjgyMDA7CiAgICAgICAgcHJveHlfcGFzcyBodHRwczovLyRkdW1teV92YXI7CiAgICB9Cgp9CgoKc2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIGxpc3RlbiBbOjpdOjgwOwogICAgc2VydmVyX25hbWUgd3d3LmVwbC1pbmZyYS5uZXQ7CiAgICByZXR1cm4gMzAxIGh0dHBzOi8vJGhvc3QkcmVxdWVzdF91cmk7Cn0KCnNlcnZlciB7CiAgICByZXNvbHZlciAxMjcuMC4wLjE6NTMgdmFsaWQ9MTBzOwogICAgbGlzdGVuIDQ0MyBzc2w7CiAgICBsaXN0ZW4gWzo6XTo0NDMgc3NsOwogICAgc2VydmVyX25hbWUgd3d3LmVwbC1pbmZyYS5uZXQ7CiAgICBzc2xfY2lwaGVycyBFQ0RIRS1FQ0RTQS1BRVMyNTYtR0NNLVNIQTM4NDpFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtRUNEU0EtQ0hBQ0hBMjAtUE9MWTEzMDU6RUNESEUtUlNBLUNIQUNIQTIwLVBPTFkxMzA1OkVDREhFLUVDRFNBLUFFUzEyOC1HQ00tU0hBMjU2OkVDREhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1FQ0RTQS1BRVMyNTYtU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtU0hBMzg0OkVDREhFLUVDRFNBLUFFUzEyOC1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1TSEEyNTY7CgogICAgc3NsX2NlcnRpZmljYXRlIC9ldGMvc3NsL3B1YmxpY190bHNfY2VydC5wZW07CiAgICBzc2xfY2VydGlmaWNhdGVfa2V5IC9ldGMvc3NsL3B1YmxpY190bHNfa2V5LnBlbTsKCiAgICBsb2NhdGlvbiB+IF4vbXVoL2FwcC9oZWxsb193b3JsZC8oLispLyguKykkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLXRlc3QtaGVsbG8td29ybGQuc2VydmljZS5jb25zdWw6NzM0NzsKICAgICAgICByZXdyaXRlIC9tdWgvYXBwL2hlbGxvX3dvcmxkLyguKykvKC4rKSAvaGVsbG9fd29ybGQvJDEvJDIgYnJlYWs7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vb3RoZXIvYWxsLyguKykvKC4rKSQgewogICAgICAgIGlmICggJHJlcXVlc3RfbWV0aG9kICF+IF4oR0VUKSQgKSB7CiAgICAgICAgICAgIHJldHVybiA0MDU7CiAgICAgICAgfQogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICRjb25uZWN0aW9uX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHNldCAkZHVtbXlfdmFyIGVwbC1hcHAtZnJvbnRlbmQtb3RoZXIuc2VydmljZS5jb25zdWw6NzQzODsKICAgICAgICByZXdyaXRlIC9vdGhlci9hbGwvKC4rKS8oLispIC9hbGwvJDEvJDIgYnJlYWs7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vbXVoL2FwcC90ZXN0X2NoX211dGF0b3IvKC4rKSQgewogICAgICAgIGlmICggJHJlcXVlc3RfbWV0aG9kICF+IF4oR0VUKSQgKSB7CiAgICAgICAgICAgIHJldHVybiA0MDU7CiAgICAgICAgfQogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICRjb25uZWN0aW9uX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHNldCAkZHVtbXlfdmFyIGVwbC1hcHAtdGVzdC1oZWxsby13b3JsZC5zZXJ2aWNlLmNvbnN1bDo3MzQ3OwogICAgICAgIHJld3JpdGUgL211aC9hcHAvdGVzdF9jaF9tdXRhdG9yLyguKykgL3Rlc3RfY2hfbXV0YXRvci8kMSBicmVhazsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi9tdWgvYXBwL25hdHNfcHVibGlzaF9nZXRfbWF4LyguKykkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLXRlc3QtaGVsbG8td29ybGQuc2VydmljZS5jb25zdWw6NzM0NzsKICAgICAgICByZXdyaXRlIC9tdWgvYXBwL25hdHNfcHVibGlzaF9nZXRfbWF4LyguKykgL25hdHNfcHVibGlzaF9nZXRfbWF4LyQxIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9CgogICAgbG9jYXRpb24gfiBeL211aC9hcHAvZmlsZXMtbS8oLispJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihQT1NUKSQgKSB7CiAgICAgICAgICAgIHJldHVybiA0MDU7CiAgICAgICAgfQoKICAgICAgICBjbGllbnRfbWF4X2JvZHlfc2l6ZSAwOwogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICRjb25uZWN0aW9uX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHNldCAkZHVtbXlfdmFyIGVwbC1hcHAtdGVzdC1oZWxsby13b3JsZC5zZXJ2aWNlLmNvbnN1bDo3MzQ3OwogICAgICAgIHJld3JpdGUgL211aC9hcHAvZmlsZXMtbS8oLispIC9maWxlcy1tLyQxIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9CgogICAgbG9jYXRpb24gfiBeL211aC9hcHAvZmlsZXMvKC4rKSQgewogICAgICAgIGlmICggJHJlcXVlc3RfbWV0aG9kICF+IF4oR0VUfFBPU1QpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC10ZXN0LWhlbGxvLXdvcmxkLnNlcnZpY2UuY29uc3VsOjczNDc7CiAgICAgICAgcmV3cml0ZSAvbXVoL2FwcC9maWxlcy8oLispIC9maWxlcy8kMSBicmVhazsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi9tdWgvYXBwL2NoX2Zvb19pbnNlcnRfc2VsZWN0LyguKykkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLXRlc3QtaGVsbG8td29ybGQuc2VydmljZS5jb25zdWw6NzM0NzsKICAgICAgICByZXdyaXRlIC9tdWgvYXBwL2NoX2Zvb19pbnNlcnRfc2VsZWN0LyguKykgL2NoX2Zvb19pbnNlcnRfc2VsZWN0LyQxIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9CgogICAgbG9jYXRpb24gfiBeL290aGVyL3NpbmdsZS8oLispJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihHRVQpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC1mcm9udGVuZC1vdGhlci5zZXJ2aWNlLmNvbnN1bDo3NDM4OwogICAgICAgIHJld3JpdGUgL290aGVyL3NpbmdsZS8oLispIC9zaW5nbGUvJDEgYnJlYWs7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vbmV4dC8oLispLyguKykkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLWZyb250ZW5kLXRlc3Quc2VydmljZS5jb25zdWw6NzQzNzsKICAgICAgICByZXdyaXRlIC9uZXh0LyguKykvKC4rKSAvbmV4dC8kMS8kMiBicmVhazsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi9tdWgvYXBwL3J0XzEkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLXRlc3QtaGVsbG8td29ybGQuc2VydmljZS5jb25zdWw6NzM0NzsKICAgICAgICByZXdyaXRlIC9tdWgvYXBwL3J0XzEgL3J0XzEgYnJlYWs7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vbXVoL2FwcC9tdXRhdGVfdGVzdF8xJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihQT1NUKSQgKSB7CiAgICAgICAgICAgIHJldHVybiA0MDU7CiAgICAgICAgfQogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICRjb25uZWN0aW9uX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHNldCAkZHVtbXlfdmFyIGVwbC1hcHAtdGVzdC1oZWxsby13b3JsZC5zZXJ2aWNlLmNvbnN1bDo3MzQ3OwogICAgICAgIHJld3JpdGUgL211aC9hcHAvbXV0YXRlX3Rlc3RfMSAvbXV0YXRlX3Rlc3RfMSBicmVhazsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi9tdWgvYXBwL2V4YW1wbGUkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKFBPU1QpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC10ZXN0LWhlbGxvLXdvcmxkLnNlcnZpY2UuY29uc3VsOjczNDc7CiAgICAgICAgcmV3cml0ZSAvbXVoL2FwcC9leGFtcGxlIC9leGFtcGxlIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9CgogICAgbG9jYXRpb24gfiBeL211aC9hcHAvZHVtbXkkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKFBPU1QpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC10ZXN0LWhlbGxvLXdvcmxkLnNlcnZpY2UuY29uc3VsOjczNDc7CiAgICAgICAgcmV3cml0ZSAvbXVoL2FwcC9kdW1teSAvZHVtbXkgYnJlYWs7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vbXVoL2FwcC9jb25maWdzX3Rlc3QkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLXRlc3QtaGVsbG8td29ybGQuc2VydmljZS5jb25zdWw6NzM0NzsKICAgICAgICByZXdyaXRlIC9tdWgvYXBwL2NvbmZpZ3NfdGVzdCAvY29uZmlnc190ZXN0IGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9CgogICAgbG9jYXRpb24gfiBeL211aC9hcHAvYmdfam9iX2NvdW50ZXIkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLXRlc3QtaGVsbG8td29ybGQuc2VydmljZS5jb25zdWw6NzM0NzsKICAgICAgICByZXdyaXRlIC9tdWgvYXBwL2JnX2pvYl9jb3VudGVyIC9iZ19qb2JfY291bnRlciBicmVhazsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi9vdGhlci9vdGhlci8kIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLWZyb250ZW5kLW90aGVyLnNlcnZpY2UuY29uc3VsOjc0Mzg7CiAgICAgICAgcmV3cml0ZSAvb3RoZXIvb3RoZXIvIC9vdGhlci8gYnJlYWs7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vdGFyZy8oLispJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihHRVQpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC1mcm9udGVuZC10ZXN0LnNlcnZpY2UuY29uc3VsOjc0Mzc7CiAgICAgICAgcmV3cml0ZSAvdGFyZy8oLispIC90YXJnLyQxIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9CgogICAgbG9jYXRpb24gfiBeL3NpbmdsZS8oLispJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihHRVQpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC1mcm9udGVuZC10ZXN0LnNlcnZpY2UuY29uc3VsOjc0Mzc7CiAgICAgICAgcmV3cml0ZSAvc2luZ2xlLyguKykgL3NpbmdsZS8kMSBicmVhazsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi9vdGhlci9lcGwtYXBwLSguKykkIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLWZyb250ZW5kLW90aGVyLnNlcnZpY2UuY29uc3VsOjc0Mzg7CiAgICAgICAgcmV3cml0ZSAvb3RoZXIvZXBsLWFwcC0oLispIC9lcGwtYXBwLSQxIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICAgICAgcHJveHlfbmV4dF91cHN0cmVhbSBlcnJvciB0aW1lb3V0IGh0dHBfNDA0IGh0dHBfNTAwOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi9yZXN0X3Rlc3QvJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihHRVQpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC1mcm9udGVuZC10ZXN0LnNlcnZpY2UuY29uc3VsOjc0Mzc7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vb3RoZXIvJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihHRVQpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC1mcm9udGVuZC1vdGhlci5zZXJ2aWNlLmNvbnN1bDo3NDM4OwogICAgICAgIHJld3JpdGUgL290aGVyLyAvIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICB9CgogICAgbG9jYXRpb24gfiBeL2xpbmtzX3Rlc3QvJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihHRVQpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC1mcm9udGVuZC10ZXN0LnNlcnZpY2UuY29uc3VsOjc0Mzc7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vJGR1bW15X3ZhcjsKICAgIH0KCiAgICBsb2NhdGlvbiB+IF4vZXBsLWFwcC0oLispJCB7CiAgICAgICAgaWYgKCAkcmVxdWVzdF9tZXRob2QgIX4gXihHRVQpJCApIHsKICAgICAgICAgICAgcmV0dXJuIDQwNTsKICAgICAgICB9CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGNvbm5lY3Rpb25fdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgc2V0ICRkdW1teV92YXIgZXBsLWFwcC1mcm9udGVuZC10ZXN0LnNlcnZpY2UuY29uc3VsOjc0Mzc7CiAgICAgICAgcmV3cml0ZSAvZXBsLWFwcC0oLispIC9lcGwtYXBwLSQxIGJyZWFrOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovLyRkdW1teV92YXI7CiAgICAgICAgcHJveHlfbmV4dF91cHN0cmVhbSBlcnJvciB0aW1lb3V0IGh0dHBfNDA0IGh0dHBfNTAwOwogICAgfQoKICAgIGxvY2F0aW9uIH4gXi8kIHsKICAgICAgICBpZiAoICRyZXF1ZXN0X21ldGhvZCAhfiBeKEdFVCkkICkgewogICAgICAgICAgICByZXR1cm4gNDA1OwogICAgICAgIH0KICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkY29ubmVjdGlvbl91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBzZXQgJGR1bW15X3ZhciBlcGwtYXBwLWZyb250ZW5kLXRlc3Quc2VydmljZS5jb25zdWw6NzQzNzsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly8kZHVtbXlfdmFyOwogICAgfQoKfQoKCn0K )
CURRENT_B64=$( consul kv get epl-kv/external-elb-conf | gunzip | base64 -w 0 || true )
if [ "$ORIGINAL_B64" != "$CURRENT_B64" ]
then
  THE_VALUE=$( echo -n $ORIGINAL_B64 | base64 -d | gzip -9 | base64 -w 0 )
  consul kv put -base64 epl-kv/external-elb-conf $THE_VALUE
else
  echo epl-kv/external-elb-conf is up to date
fi
